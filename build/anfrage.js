function T(){let d=document.querySelectorAll('[data-name="value-info"]');const s=document.querySelector('[modal-content="value-info"]'),f=document.querySelector('[data-name="coverage-info"]'),y=document.querySelector('[modal-content="coverage-info"]'),v=document.querySelector('[data-name="modal-close"]'),c=document.querySelector('[data-name="modal"]');d.forEach(n=>n.addEventListener("click",()=>{c.style.display="flex",s.style.display="block",y.style.display="none"})),f.addEventListener("click",()=>{c.style.display="flex",s.style.display="none",y.style.display="block"}),v.addEventListener("click",()=>{c.style.display="none"}),c.addEventListener("click",n=>{n.target===n.currentTarget&&(c.style.display="none")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(c.style.display="none")})}(function(){const d=document.querySelector("[data-form='multi-step'] form"),s=d.dataset.name,f=document.querySelectorAll("[data-form='step']"),y=document.querySelector("[data-form='success']"),v=document.querySelector("[data-form='error']"),c=document.querySelectorAll("[data-form='next-btn']"),n=document.querySelectorAll("[data-form='submit-btn']"),L=document.querySelectorAll("[data-form='step-indicator']"),C=document.querySelectorAll("[data-condition-name]"),O=document.querySelectorAll("[data-condition-el]"),V=document.querySelector("[data-repeat='item']");let i=0;function F(e){return e.offsetParent!==null}function I(){C.forEach(e=>{k(e)})}function E(e){f.forEach((a,t)=>{var o,l;t===i?a.style.display="block":a.style.display="none",t===i?(o=L[t])==null||o.classList.add("active"):(l=L[t])==null||l.classList.remove("active")}),window.scrollTo({top:0}),I(),u()}function b(e=!1){let a=!0;const t=Array.from(f[i].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<t.length;o++){if(!F(t[o]))continue;if(!(e?t[o].checkValidity():t[o].reportValidity()))return a=!1}return a}function u(e){b(!0)?(c.forEach(t=>t.classList.remove("disabled")),n==null||n.forEach(t=>t.classList.remove("disabled"))):(c.forEach(t=>t.classList.add("disabled")),n==null||n.forEach(t=>t.classList.add("disabled")))}function D(){O.forEach(e=>e.style.display="none")}function H(){i>0&&i--,E()}function J(){b()&&(i<f.length&&i++,E())}function M(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((o,l)=>{var q,S,m;const r=(q=o.querySelector("[name*='Instrument']"))==null?void 0:q.value,g=(S=o.querySelector("[name*='Instrumentenwert']"))==null?void 0:S.value,h=(m=o.querySelector("[name*='Wertart']:checked"))==null?void 0:m.value;r&&g&&h&&(t+=r+`
`+h+`
`+g+`

`)}),e.append("Instruments",t),e}function R(e){let a=new FormData(d);if(!b())return;M(a);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const o={method:"POST",body:a,redirect:"follow"},l=d.action;fetch(l,o).then(function(r){r.ok&&(d.style.display="none",y.style.display="block",window.scrollTo({top:0,behavior:"smooth"}),P(),localStorage.removeItem(s))}).catch(function(r){console.error("Error: ",r),y.style.display="none",v.style.display="block"})}function P(){const e=document.querySelectorAll("dotlottie-wc");e.forEach(a=>{a.style.opacity=1,a.dotLottie.play()}),setTimeout(()=>{e.forEach(a=>{a.dotLottie.play()})},3600)}function k(e){var l;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const o=(l=a.querySelector(":checked"))==null?void 0:l.value;t.forEach(r=>{var S;const g=(S=r==null?void 0:r.dataset)==null?void 0:S.condition.split(",").map(m=>m.trim());function h(m,N){return m.some(A=>Array.from(A)[0]==="!"?A.substring(1)!==N:A===N)}const q=h(g,o);a&&(q?r.style.display="block":r.style.display="none")})}function w(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function W(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=w(e.target);if(!a)return;let t=localStorage.getItem(s);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(s,JSON.stringify(t))}function U(){let e=localStorage.getItem(s);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let o=w(t);o&&(o.includes("files")||e[o]&&(t.type==="checkbox"?t.checked=e[o]==="on":t.type==="radio"?t.checked=e[o]===t.value:t.value=e[o]))}),I()}let p=1;function $(e){return document.querySelectorAll("[data-repeat='item']")}function j(e){$().length<=1||(e.remove(),p--,u())}function z(){p++;const e=document.querySelectorAll("[data-repeat='item']");let a=V.cloneNode(!0);a.querySelectorAll("input").forEach((o,l)=>{o.type==="text"||o.type==="number"?(o.value="",o.name+=p):o.type==="radio"&&(o.checked=!1,o.name+=p,o.id+=p)}),e[e.length-1].after(a),u(),T()}function G(){U(),D(),E(),u(),T()}G(),document.addEventListener("input",function(e){u(),W(e)},!1),document.addEventListener("keypress",function(e){e.key==="Enter"&&x(e)}),document.addEventListener("click",x);function x(e){e.target.matches("[data-form='next-btn']")&&J(),e.target.matches("[data-form='back-btn']")&&H(),e.target.closest("[data-condition]")&&k(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&j(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&z(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&R()}document.addEventListener("change",function(e){u(),e.target.closest("[data-condition-name]")&&k(e.target.closest("[data-condition-name]"))},!0)})();
