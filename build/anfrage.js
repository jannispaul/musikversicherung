function x(){let y=document.querySelectorAll('[data-name="value-info"]');const d=document.querySelector('[modal-content="value-info"]'),g=document.querySelector('[data-name="coverage-info"]'),h=document.querySelector('[modal-content="coverage-info"]'),q=document.querySelector('[data-name="modal-close"]'),c=document.querySelector('[data-name="modal"]');y.forEach(r=>r.addEventListener("click",()=>{c.style.display="flex",d.style.display="block",h.style.display="none"})),g.addEventListener("click",()=>{c.style.display="flex",d.style.display="none",h.style.display="block"}),q.addEventListener("click",()=>{c.style.display="none"}),c.addEventListener("click",r=>{r.target===r.currentTarget&&(c.style.display="none")}),document.addEventListener("keydown",r=>{r.key==="Escape"&&(c.style.display="none")})}(function(){const y=document.querySelector("[data-form='multi-step'] form"),d=y.dataset.name,g=document.querySelectorAll("[data-form='step']"),h=document.querySelector("[data-form='success']"),q=document.querySelector("[data-form='error']"),c=document.querySelectorAll("[data-form='next-btn']"),r=document.querySelectorAll("[data-form='submit-btn']"),L=document.querySelectorAll("[data-form='step-indicator']"),F=document.querySelectorAll("[data-condition-name]"),O=document.querySelectorAll("[data-condition-el]"),C=document.querySelector("[data-repeat='item']");let u=0;function T(e){return e.offsetParent!==null}function I(){F.forEach(e=>{k(e)})}function E(e){g.forEach((a,t)=>{var n,l;t===u?a.style.display="block":a.style.display="none",t===u?(n=L[t])==null||n.classList.add("active"):(l=L[t])==null||l.classList.remove("active")}),window.scrollTo({top:0}),I(),p()}function b(e=!1){let a=!0;const t=Array.from(g[u].querySelectorAll("input[required], textarea[required], select[required]"));for(let n=0;n<t.length;n++){if(!T(t[n]))continue;if(!(e?t[n].checkValidity():t[n].reportValidity()))return a=!1}return a}function p(e){b(!0)?(c.forEach(t=>t.classList.remove("disabled")),r==null||r.forEach(t=>t.classList.remove("disabled"))):(c.forEach(t=>t.classList.add("disabled")),r==null||r.forEach(t=>t.classList.add("disabled")))}function M(){O.forEach(e=>e.style.display="none")}function H(){u>0&&u--,E()}function J(){b()&&(u<g.length&&u++,E())}function R(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((n,l)=>{var f,i,S;const o=(f=n.querySelector("[name*='Instrument']"))==null?void 0:f.value,s=(i=n.querySelector("[name*='Instrumentenwert']"))==null?void 0:i.value,m=(S=n.querySelector("[name*='Wertart']:checked"))==null?void 0:S.value;o&&s&&m&&(t+=o+`
`+m+`
`+s+`

`)}),e.append("Instruments",t),e}function P(e){let a=new FormData(y);if(_(a),!b())return;R(a);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const n={method:"POST",body:a,redirect:"follow"},l=y.action;fetch(l,n).then(async function(o){o.ok&&(y.style.display="none",q.style.display="none",h.style.display="block",localStorage.removeItem(d),window.scrollTo({top:0,behavior:"smooth"}),await W())}).catch(function(o){console.error("Error: ",o),h.style.display="none",q.style.display="block"})}function W(){const e=document.querySelectorAll("dotlottie-wc");e.forEach(a=>{a.style.opacity=1,a.dotLottie.play()}),setTimeout(()=>{e.forEach(a=>{a.dotLottie.play()})},3600)}function _(e){if(!window.dataLayer||!e)return;const a=e.get("Email"),t=e.get("Versicherung");let n=0,l=e.get("Gesamtwert");const o=.12;e.entries().forEach(i=>{i[0].includes("Instrumentenwert")&&(n+=parseInt(i[1]))});let s=t==="SINFONIMA"?n:l,m=t==="SINFONIMA"||s>"50000"?.012:.015,f=s*m*o||0;console.log("leadValue",f,m,s),window.dataLayer.push({event:"lead_form_submit","lead-value":Math.round(f*100)/100,email:a})}function k(e){var l;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const n=(l=a.querySelector(":checked"))==null?void 0:l.value;t.forEach(o=>{var i;const s=(i=o==null?void 0:o.dataset)==null?void 0:i.condition.split(",").map(S=>S.trim());function m(S,V){return S.some(A=>Array.from(A)[0]==="!"?A.substring(1)!==V:A===V)}const f=m(s,n);a&&(f?o.style.display="block":o.style.display="none")})}function w(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function D(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=w(e.target);if(!a)return;let t=localStorage.getItem(d);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(d,JSON.stringify(t))}function G(){let e=localStorage.getItem(d);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let n=w(t);n&&(n.includes("files")||e[n]&&(t.type==="checkbox"?t.checked=e[n]==="on":t.type==="radio"?t.checked=e[n]===t.value:t.value=e[n]))}),I()}let v=1;function U(e){return document.querySelectorAll("[data-repeat='item']")}function $(e){U().length<=1||(e.remove(),v--,p())}function j(){v++;const e=document.querySelectorAll("[data-repeat='item']");let a=C.cloneNode(!0);a.querySelectorAll("input").forEach((n,l)=>{n.type==="text"||n.type==="number"?(n.value="",n.name+=v):n.type==="radio"&&(n.checked=!1,n.name+=v,n.id+=v)}),e[e.length-1].after(a),p(),x()}function z(){G(),M(),E(),p(),x()}z(),document.addEventListener("input",function(e){p(),D(e)},!1),document.addEventListener("keypress",function(e){e.key==="Enter"&&N(e)}),document.addEventListener("click",N);function N(e){e.target.matches("[data-form='next-btn']")&&J(),e.target.matches("[data-form='back-btn']")&&H(),e.target.closest("[data-condition]")&&k(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&$(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&j(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&P()}document.addEventListener("change",function(e){p(),e.target.closest("[data-condition-name]")&&k(e.target.closest("[data-condition-name]"))},!0)})();
