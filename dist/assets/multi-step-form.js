(()=>{const s=document.querySelector("[data-form='multi-step'] form"),u=document.querySelectorAll("[data-form='step']");document.querySelectorAll("[data-form='back-btn']");const c=document.querySelectorAll("[data-form='next-btn']"),i=document.querySelector("[data-form='submit-btn']"),f=s==null?void 0:s.dataset.name,y=document.querySelector("[data-form='success']")||document.querySelector(".w-form-done"),O=document.querySelector("[data-form='error']")||document.querySelector(".w-form-fail"),h=document.querySelectorAll("[data-form='step-indicator']"),q=document.querySelector("[data-form='current-step']"),b=document.querySelector("[data-form='total-steps']"),V=document.querySelectorAll("[data-condition-name]"),x=document.querySelectorAll("[data-condition]");let r=0,E=Object.fromEntries(new URLSearchParams(location.search));function C(t){return t.offsetParent!==null}function N(){b&&(b.innerText=u.length)}function F(){q&&(q.innerText=r+1)}function S(){u.forEach((t,e)=>{var a,o;e===r?t.style.display="block":t.style.display="none",e===r?(a=h[e])==null||a.classList.add("active"):(o=h[e])==null||o.classList.remove("active")}),F(),l(),m(),v()}function g(t=!1){let e=!0;const a=Array.from(u[r].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<a.length;o++){if(!C(a[o]))continue;if(!(t?a[o].checkValidity():a[o].reportValidity()))return e=!1}return e}function m(){g(!0)?(c==null||c.forEach(e=>e.classList.remove("disabled")),i==null||i.classList.remove("disabled")):(c==null||c.forEach(e=>e.classList.add("disabled")),i==null||i.classList.add("disabled"))}function P(){x.forEach(t=>t.style.display="none")}function v(){window.scrollTo({top:0,behavior:"smooth"})}function R(){r>0&&r--,S()}function H(){g()&&(r<u.length&&r++,S())}function J(t){if(t.preventDefault(),t.stopPropagation(),!g())return;const e=document.querySelector("[data-form='submit']");e&&(e.innerHTML="Please wait...",e.disabled=!0),s.submit();const a=s.action;fetch(a,requestOptions).then(function(o){o.ok&&(localStorage.removeItem(f),s.style.display="none",y&&(y.style.display="block"),v())}).catch(function(o){console.error("Error: ",o),y.style.display="none",O.style.display="block"})}function l(t){var T;let e;if(t!=null&&t.dataset.conditionName?e=t:e=t==null?void 0:t.querySelector("[data-condition-name]"),!(e!=null&&e.dataset))return;let a=document.querySelectorAll(`[data-condition-el="${e.dataset.conditionName}"]`);const o=(T=t.querySelector(":checked"))==null?void 0:T.value;function I(n,p){return n.some(d=>Array.from(d)[0]==="!"?d.substring(1)!==p:d===p)}a.forEach(n=>{var w;const p=(w=n==null?void 0:n.dataset)==null?void 0:w.condition.split(",").map(K=>K.trim()),d=I(p,o);e&&(d?n.style.display="block":n.style.display="none")})}function k(t){return t.name.length>0?t.name:t.id.length>0?t.id:null}function U(t){if(t.target.closest("[data-auto-save='exclude']")||!t.target.closest("[data-auto-save]"))return;var e=k(t.target);if(!e)return;let a=localStorage.getItem(f);a=a?JSON.parse(a):{},t.target.type==="checkbox"?a[e]=t.target.checked?"on":"off":a[e]=t.target.value,localStorage.setItem(f,JSON.stringify(a))}function A(t,e){Array.prototype.slice.call(t).forEach(a=>{let o=k(a);o&&(o.includes("files")||e[o]&&(a.type==="checkbox"?a.checked=e[o]==="on":a.type==="radio"?a.checked=e[o]===a.value:a.value=e[o]))})}function D(){let t=localStorage.getItem(f);if(!t)return;t=JSON.parse(t);let e=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");A(e,t)}function M(){if(!E)return;const t=document.querySelectorAll("input, textarea, select");A(t,E)}function $(){P(),N(),D(),M(),l(),S(),m()}$(),document.addEventListener("keypress",function(t){t.key==="Enter"&&L(t)}),document.addEventListener("click",L);function L(t){t.preventDefault(),t.target.matches("[data-form='next-btn']")&&(console.log("nextbtn"),H()),t.target.matches("[data-form='back-btn']")&&R(),t.target.closest("[data-condition]")&&l(t.target.closest("[data-condition]")),t.target.closest("[data-repeat='delete-item']")&&deleteRepeatable(t.target.closest("[data-repeat='item']")),t.target.closest("[data-repeat='add-item']")&&addRepeatable(t.target.closest("[data-repeat='add-item']")),t.target.matches("[data-form='submit-btn']")&&J()}document.addEventListener("input",z,!1);function z(t){m(),U(t)}document.addEventListener("change",G,!0);function G(t){m(),t.target.closest("[data-condition-name]")&&l(t.target.closest("[data-condition-name]"))}})();
