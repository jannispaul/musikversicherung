(()=>{const n=document.querySelector("[data-form='multi-step'] form"),f=document.querySelectorAll("[data-form='step']");document.querySelectorAll("[data-form='back-btn']");const c=document.querySelectorAll("[data-form='next-btn']"),i=document.querySelector("[data-form='submit-btn']"),S=n==null?void 0:n.dataset.name,g=document.querySelector("[data-form='success']")||document.querySelector(".w-form-done"),O=document.querySelector("[data-form='error']")||document.querySelector(".w-form-fail"),q=document.querySelectorAll("[data-form='step-indicator']"),E=document.querySelector("[data-form='current-step']"),k=document.querySelector("[data-form='total-steps']"),V=document.querySelectorAll("[data-condition-name]"),C=document.querySelectorAll("[data-condition]");let r=0,v=Object.fromEntries(new URLSearchParams(location.search));function F(t){return t.offsetParent!==null}function N(){k&&(k.innerText=f.length)}function x(){E&&(E.innerText=r+1)}function h(){f.forEach((t,e)=>{var a,o;e===r?t.style.display="block":t.style.display="none",e===r?(a=q[e])==null||a.classList.add("active"):(o=q[e])==null||o.classList.remove("active")}),x(),l(),m(),A()}function b(t=!1){let e=!0;const a=Array.from(f[r].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<a.length;o++){if(!F(a[o]))continue;if(!(t?a[o].checkValidity():a[o].reportValidity()))return e=!1}return e}function m(){b(!0)?(c==null||c.forEach(e=>e.classList.remove("disabled")),i==null||i.classList.remove("disabled")):(c==null||c.forEach(e=>e.classList.add("disabled")),i==null||i.classList.add("disabled"))}function P(){C.forEach(t=>t.style.display="none")}function A(){window.scrollTo({top:0,behavior:"smooth"})}function D(){r>0&&r--,h()}function R(){b()&&(r<f.length&&r++,h())}function H(t){if(console.log(t),t.preventDefault(),!b())return;const e=document.querySelector("[data-form='submit']");e&&(e.innerHTML=e.dataset.wait&&"Please wait...",e.disabled=!0);const o={method:"POST",body:new FormData(n),redirect:"follow"},p=n.action;fetch(p,o).then(function(d){d.ok&&(n.style.display="none",g&&(g.style.display="block"),A())}).catch(function(d){console.error("Error: ",d),g.style.display="none",O.style.display="block"})}function l(t){var d;let e;if(t!=null&&t.dataset.conditionName?e=t:e=t==null?void 0:t.querySelector("[data-condition-name]"),!(e!=null&&e.dataset))return;let a=document.querySelectorAll(`[data-condition-el="${e.dataset.conditionName}"]`);const o=(d=t.querySelector(":checked"))==null?void 0:d.value;function p(s,y){return s.some(u=>Array.from(u)[0]==="!"?u.substring(1)!==y:u===y)}a.forEach(s=>{var T;const y=(T=s==null?void 0:s.dataset)==null?void 0:T.condition.split(",").map(K=>K.trim()),u=p(y,o);e&&(u?s.style.display="block":s.style.display="none")})}function L(t){return t.name.length>0?t.name:t.id.length>0?t.id:null}function J(t){if(t.target.closest("[data-auto-save='exclude']")||!t.target.closest("[data-auto-save]"))return;var e=L(t.target);if(!e)return;let a=localStorage.getItem(S);a=a?JSON.parse(a):{},t.target.type==="checkbox"?a[e]=t.target.checked?"on":"off":a[e]=t.target.value,localStorage.setItem(S,JSON.stringify(a))}function w(t,e){Array.prototype.slice.call(t).forEach(a=>{let o=L(a);o&&(o.includes("files")||e[o]&&(a.type==="checkbox"?a.checked=e[o]==="on":a.type==="radio"?a.checked=e[o]===a.value:a.value=e[o]))})}function U(){let t=localStorage.getItem(S);if(!t)return;t=JSON.parse(t);let e=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");w(e,t)}function M(){if(!v)return;const t=document.querySelectorAll("input, textarea, select");w(t,v)}function $(){P(),N(),U(),M(),l(),h(),m()}$(),document.addEventListener("keypress",function(t){t.key==="Enter"&&I(t)}),document.addEventListener("click",I);function I(t){t.target.matches("[data-form='next-btn']")&&R(),t.target.matches("[data-form='back-btn']")&&D(),t.target.closest("[data-condition]")&&l(t.target.closest("[data-condition]")),t.target.closest("[data-repeat='delete-item']")&&deleteRepeatable(t.target.closest("[data-repeat='item']")),t.target.closest("[data-repeat='add-item']")&&addRepeatable(t.target.closest("[data-repeat='add-item']")),t.target.matches("[data-form='submit-btn']")&&H(t)}document.addEventListener("input",z,!1);function z(t){m(),J(t)}document.addEventListener("change",G,!0);function G(t){m(),t.target.closest("[data-condition-name]")&&l(t.target.closest("[data-condition-name]"))}})();document.addEventListener("submit",Q);function Q(n){console.log("submiiting:",n),n.preventDefault()}
