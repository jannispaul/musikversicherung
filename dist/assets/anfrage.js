function N(){let d=document.querySelectorAll('[data-name="value-info"]');const s=document.querySelector('[modal-content="value-info"]'),f=document.querySelector('[data-name="coverage-info"]'),y=document.querySelector('[modal-content="coverage-info"]'),g=document.querySelector('[data-name="modal-close"]'),c=document.querySelector('[data-name="modal"]');d.forEach(r=>r.addEventListener("click",()=>{c.style.display="flex",s.style.display="block",y.style.display="none"})),f.addEventListener("click",()=>{c.style.display="flex",s.style.display="none",y.style.display="block"}),g.addEventListener("click",()=>{c.style.display="none"}),c.addEventListener("click",r=>{r.target===r.currentTarget&&(c.style.display="none")}),document.addEventListener("keydown",r=>{r.key==="Escape"&&(c.style.display="none")})}(function(){const d=document.querySelector("[data-form='multi-step'] form"),s=d.dataset.name,f=document.querySelectorAll("[data-form='step']"),y=document.querySelector("[data-form='success']"),g=document.querySelector("[data-form='error']"),c=document.querySelectorAll("[data-form='next-btn']"),r=document.querySelectorAll("[data-form='submit-btn']"),k=document.querySelectorAll("[data-form='step-indicator']"),T=document.querySelectorAll("[data-condition-name]"),C=document.querySelectorAll("[data-condition-el]"),O=document.querySelector("[data-repeat='item']");let i=0;function V(e){return e.offsetParent!==null}function A(){T.forEach(e=>{q(e)})}function S(e){f.forEach((a,t)=>{var n,l;t===i?a.style.display="block":a.style.display="none",t===i?(n=k[t])==null||n.classList.add("active"):(l=k[t])==null||l.classList.remove("active")}),window.scrollTo({top:0}),A(),u()}function h(e=!1){let a=!0;const t=Array.from(f[i].querySelectorAll("input[required], textarea[required], select[required]"));for(let n=0;n<t.length;n++){if(!V(t[n]))continue;if(!(e?t[n].checkValidity():t[n].reportValidity()))return a=!1}return a}function u(e){h(!0)?(c.forEach(t=>t.classList.remove("disabled")),r==null||r.forEach(t=>t.classList.remove("disabled"))):(c.forEach(t=>t.classList.add("disabled")),r==null||r.forEach(t=>t.classList.add("disabled")))}function F(){C.forEach(e=>e.style.display="none")}function D(){i>0&&i--,S()}function H(){h()&&(i<f.length&&i++,S())}function J(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((n,l)=>{const o=n.querySelector("[name*='Instrument']").value,m=n.querySelector("[name*='Instrumentenwert']").value,v=n.querySelector("[name*='Wertart']").value;t+=o+`
`+v+`
`+m+`

`}),e.append("Instruments",t),e}function M(e){let a=new FormData(d);if(!h())return;J(a);for(const o of a.entries())console.log(`${o[0]}, ${o[1]}`);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const n={method:"POST",body:a,redirect:"follow"},l=d.action;fetch(l,n).then(function(o){if(o.ok){d.style.display="none",y.style.display="block",window.scrollTo({top:0,behavior:"smooth"});const m=document.querySelector(".lottie-trigger");if(!m)return;m.click(),localStorage.removeItem(s)}}).catch(function(o){console.error("Error: ",o),y.style.display="none",g.style.display="block"})}function q(e){var l;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const n=(l=a.querySelector(":checked"))==null?void 0:l.value;t.forEach(o=>{var x;const m=(x=o==null?void 0:o.dataset)==null?void 0:x.condition.split(",").map(E=>E.trim());function v(E,w){return E.some(b=>Array.from(b)[0]==="!"?b.substring(1)!==w:b===w)}const z=v(m,n);a&&(z?o.style.display="block":o.style.display="none")})}function L(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function R(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=L(e.target);if(!a)return;let t=localStorage.getItem(s);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(s,JSON.stringify(t))}function $(){let e=localStorage.getItem(s);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let n=L(t);n&&(n.includes("files")||e[n]&&(t.type==="checkbox"?t.checked=e[n]==="on":t.type==="radio"?t.checked=e[n]===t.value:t.value=e[n]))}),A()}let p=1;function P(e){return document.querySelectorAll("[data-repeat='item']")}function W(e){P().length<=1||(e.remove(),p--,u())}function U(){p++;const e=document.querySelectorAll("[data-repeat='item']");let a=O.cloneNode(!0);a.querySelectorAll("input").forEach((n,l)=>{n.type==="text"||n.type==="number"?(n.value="",n.name+=p):(n.checked=!1,n.name+=p)}),e[e.length-1].after(a),u(),N()}function j(){$(),F(),S(),u(),N()}j(),document.addEventListener("input",function(e){u(),R(e)},!1),document.addEventListener("keypress",function(e){e.key==="Enter"&&I(e)}),document.addEventListener("click",I);function I(e){e.target.matches("[data-form='next-btn']")&&H(),e.target.matches("[data-form='back-btn']")&&D(),e.target.closest("[data-condition]")&&q(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&W(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&U(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&M()}document.addEventListener("change",function(e){u(),e.target.closest("[data-condition-name]")&&q(e.target.closest("[data-condition-name]"))},!0)})();
