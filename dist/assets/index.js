(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const s=document.querySelector("[data-form='multi-step'] form"),y=s.dataset.name,p=document.querySelectorAll("[data-form='step']"),v=document.querySelector("[data-form='success']");document.querySelector("[data-form='error']");document.querySelectorAll("[data-form='back-btn']");const A=document.querySelectorAll("[data-form='next-btn']"),k=document.querySelector("[data-form='submit-btn']"),E=document.querySelectorAll("[data-form='step-indicator']"),x=document.querySelectorAll("[data-condition-name]"),V=document.querySelectorAll("[data-condition-el]"),w=document.querySelector("[data-repeat='item']");document.querySelectorAll("[data-repeat='add-item']");document.querySelectorAll("[data-repeat='delete-item']");let c=0;function F(e){return e.offsetParent!==null}function L(){x.forEach(e=>{h(e)})}function g(e){p.forEach((a,t)=>{var o,r;t===c?a.style.display="block":a.style.display="none",t===c?(o=E[t])==null||o.classList.add("active"):(r=E[t])==null||r.classList.remove("active")}),L(),l()}function S(e=!1){let a=!0;const t=Array.from(p[c].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<t.length;o++){if(!F(t[o]))continue;if(!(e?t[o].checkValidity():t[o].reportValidity()))return a=!1}return a}function l(e){S(!0)?(A.forEach(t=>t.classList.remove("disabled")),k.classList.remove("disabled")):(A.forEach(t=>t.classList.add("disabled")),k.classList.add("disabled"))}function T(){V.forEach(e=>e.style.display="none")}function C(){c>0&&c--,g()}function D(){S()&&(c<p.length&&c++,g())}function P(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((o,r)=>{const n=o.querySelector("[name*='Instrument']").value,i=o.querySelector("[name*='Instrumentenwert']").value,d=o.querySelector("[name*='Wertart']").value;t+=n+`
`+d+`
`+i+`

`}),e.append("Instruments",t),e}function H(e){let a=new FormData(s);if(!S())return;P(a);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const o={method:"POST",body:a,redirect:"follow"},r=s.action;fetch(r,o).then(function(n){if(n.ok){s.style.display="none",v.style.display="block",window.scrollTo({top:0,behavior:"smooth"});const i=document.querySelector(".lottie-trigger");if(!i)return;i.click()}}).catch(function(n){console.error("Error: ",n),v.style.display="none",n.style.display="block"})}function h(e){var r;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const o=(r=e.querySelector(":checked"))==null?void 0:r.value;t.forEach(n=>{var b;const i=(b=n==null?void 0:n.dataset)==null?void 0:b.condition.split(",").map(m=>m.trim());function d(m,q){return m.some(f=>Array.from(f)[0]==="!"?f.substring(1)!==q:f===q)}const O=d(i,o);a&&(O?n.style.display="block":n.style.display="none")})}function I(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function J(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=I(e.target);if(!a)return;let t=localStorage.getItem(y);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(y,JSON.stringify(t))}function M(){let e=localStorage.getItem(y);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let o=I(t);o&&(o.includes("files")||e[o]&&(t.type==="checkbox"?t.checked=e[o]==="on":t.type==="radio"?t.checked=e[o]===t.value:t.value=e[o]))}),L()}let u=1;function R(e){return document.querySelectorAll("[data-repeat='item']")}function B(e){R().length<=1||(e.remove(),u--,l())}function W(e){u++;const a=document.querySelectorAll("[data-repeat='item']");let t=w.cloneNode(!0);t.querySelectorAll("input").forEach((r,n)=>{r.type==="text"||r.type==="number"?(r.value="",r.name+=u):(r.checked=!1,r.name+=u)}),a[a.length-1].after(t),l()}function K(){M(),T(),g(),l()}K();document.addEventListener("input",function(e){l(),J(e)},!1);document.addEventListener("keypress",function(e){e.key==="Enter"&&N(e)});document.addEventListener("click",N);function N(e){e.target.matches("[data-form='next-btn']")&&D(),e.target.matches("[data-form='back-btn']")&&C(),e.target.closest("[data-condition]")&&h(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&B(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&W(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&H()}document.addEventListener("change",function(e){l(),e.target.closest("[data-condition-name]")&&h(e.target.closest("[data-condition-name]"))},!0);
