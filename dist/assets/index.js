(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function y(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(o){if(o.ep)return;o.ep=!0;const i=y(o);fetch(o.href,i)}})();window.addEventListener("DOMContentLoaded",N=>{const c=document.querySelector("[data-form='multi-step'] form"),y=c.dataset.name,d=document.querySelectorAll("[data-form='step']"),o=document.querySelector("[data-form='success']");document.querySelector("[data-form='error']"),document.querySelectorAll("[data-form='back-btn']");const i=document.querySelectorAll("[data-form='next-btn']"),u=document.querySelector("[data-form='submit-btn']"),A=document.querySelectorAll("[data-form='step-indicator']"),w=document.querySelectorAll("[data-condition-name]"),x=document.querySelectorAll("[data-condition-el]"),V=document.querySelector("[data-repeat='item']");document.querySelectorAll("[data-repeat='add-item']"),document.querySelectorAll("[data-repeat='delete-item']");let l=0;function F(e){return e.offsetParent!==null}function E(){w.forEach(e=>{h(e)})}function g(e){d.forEach((a,t)=>{var r,n;t===l?a.style.display="block":a.style.display="none",t===l?(r=A[t])==null||r.classList.add("active"):(n=A[t])==null||n.classList.remove("active")}),E(),m()}function S(e=!1){let a=!0;const t=Array.from(d[l].querySelectorAll("input[required], textarea[required], select[required]"));for(let r=0;r<t.length;r++){if(!F(t[r]))continue;if(!(e?t[r].checkValidity():t[r].reportValidity()))return a=!1}return a}function m(e){S(!0)?(i.forEach(t=>t.classList.remove("disabled")),u.classList.remove("disabled")):(i.forEach(t=>t.classList.add("disabled")),u.classList.add("disabled"))}function T(){x.forEach(e=>e.style.display="none")}function C(){l>0&&l--,g()}function D(){S()&&(l<d.length&&l++,g())}function M(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((r,n)=>{const s=r.querySelector("[name*='Instrument']").value,f=r.querySelector("[name*='Instrumentenwert']").value,b=r.querySelector("[name*='Wertart']").value;t+=s+`
`+b+`
`+f+`

`}),e.append("Instruments",t),e}function P(e){let a=new FormData(c);if(!S())return;M(a);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const r={method:"POST",body:a,redirect:"follow"},n=c.action;fetch(n,r).then(function(s){if(s.ok){c.style.display="none",o.style.display="block",window.scrollTo({top:0,behavior:"smooth"});const f=document.querySelector(".lottie-trigger");if(!f)return;f.click()}}).catch(function(s){console.error("Error: ",s),o.style.display="none",s.style.display="block"})}function h(e){var n;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const r=(n=e.querySelector(":checked"))==null?void 0:n.value;t.forEach(s=>{var I;const f=(I=s==null?void 0:s.dataset)==null?void 0:I.condition.split(",").map(q=>q.trim());function b(q,O){return q.some(v=>Array.from(v)[0]==="!"?v.substring(1)!==O:v===O)}const U=b(f,r);a&&(U?s.style.display="block":s.style.display="none")})}function L(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function H(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=L(e.target);if(!a)return;let t=localStorage.getItem(y);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(y,JSON.stringify(t))}function J(){let e=localStorage.getItem(y);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let r=L(t);r&&(r.includes("files")||e[r]&&(t.type==="checkbox"?t.checked=e[r]==="on":t.type==="radio"?t.checked=e[r]===t.value:t.value=e[r]))}),E()}let p=1;function R(e){return document.querySelectorAll("[data-repeat='item']")}function B(e){R().length<=1||(e.remove(),p--,m())}function W(e){p++;const a=document.querySelectorAll("[data-repeat='item']");let t=V.cloneNode(!0);t.querySelectorAll("input").forEach((n,s)=>{n.type==="text"||n.type==="number"?(n.value="",n.name+=p):(n.checked=!1,n.name+=p)}),a[a.length-1].after(t),m()}function K(){J(),T(),g(),m()}K(),document.addEventListener("input",function(e){m(),H(e)},!1),document.addEventListener("keypress",function(e){e.key==="Enter"&&k(e)}),document.addEventListener("click",k);function k(e){e.target.matches("[data-form='next-btn']")&&D(),e.target.matches("[data-form='back-btn']")&&C(),e.target.closest("[data-condition]")&&h(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&B(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&W(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&P()}document.addEventListener("change",function(e){m(),e.target.closest("[data-condition-name]")&&h(e.target.closest("[data-condition-name]"))},!0)});
