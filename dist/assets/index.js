(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const s=document.querySelector("[data-form='multi-step'] form"),I=s.dataset.name,y=document.querySelectorAll("[data-form='step']"),q=document.querySelector("[data-form='success']");document.querySelector("[data-form='error']");document.querySelectorAll("[data-form='back-btn']");const v=document.querySelectorAll("[data-form='next-btn']"),A=document.querySelector("[data-form='submit-btn']"),E=document.querySelectorAll("[data-form='step-indicator']"),N=document.querySelectorAll("[data-condition-name]"),O=document.querySelectorAll("[data-condition-el]"),V=document.querySelector("[data-repeat='item']");document.querySelectorAll("[data-repeat='add-item']");document.querySelectorAll("[data-repeat='delete-item']");let c=0;function w(e){return e.offsetParent!==null}function L(){N.forEach(e=>{g(e)})}function p(e){y.forEach((r,t)=>{var n,o;t===c?r.style.display="block":r.style.display="none",t===c?(n=E[t])==null||n.classList.add("active"):(o=E[t])==null||o.classList.remove("active")}),L(),l()}function S(e=!1){let r=!0;const t=Array.from(y[c].querySelectorAll("input[required], textarea[required], select[required]"));for(let n=0;n<t.length;n++){if(!w(t[n]))continue;if(!(e?t[n].checkValidity():t[n].reportValidity()))return r=!1}return r}function l(e){S(!0)?(v.forEach(t=>t.classList.remove("disabled")),A.classList.remove("disabled")):(v.forEach(t=>t.classList.add("disabled")),A.classList.add("disabled"))}function x(){O.forEach(e=>e.style.display="none")}function F(){c>0&&c--,p()}function T(){S()&&(c<y.length&&c++,p())}function C(e){let r=document.querySelectorAll("[data-repeat='item']"),t="";return r.forEach((n,o)=>{const a=n.querySelector("[name*='Instrument']").value,i=n.querySelector("[name*='Instrumentenwert']").value,d=n.querySelector("[name*='Wertart']").value;t+=a+`
`+d+`
`+i+`

`}),e.append("Instruments",t),e}function P(e){let r=new FormData(s);if(!S())return;C(r);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const n={method:"POST",body:r,redirect:"follow"},o=s.action;fetch(o,n).then(function(a){if(a.ok){s.style.display="none",q.style.display="block",window.scrollTo({top:0,behavior:"smooth"});const i=document.querySelector(".lottie-trigger");if(!i)return;i.click()}}).catch(function(a){console.error("Error: ",a),q.style.display="none",a.style.display="block"})}function g(e){var o;let r;if(e.dataset.conditionName?r=e:r=e.querySelector("[data-condition-name]"),!(r!=null&&r.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${r.dataset.conditionName}"]`);const n=(o=e.querySelector(":checked"))==null?void 0:o.value;t.forEach(a=>{var h;const i=(h=a==null?void 0:a.dataset)==null?void 0:h.condition.split(",").map(m=>m.trim());function d(m,b){return m.some(f=>Array.from(f)[0]==="!"?f.substring(1)!==b:f===b)}const k=d(i,n);r&&(k?a.style.display="block":a.style.display="none")})}function D(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function H(){let e=localStorage.getItem(I);if(!e)return;e=JSON.parse(e);let r=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(r).forEach(function(t){let n=D(t);n&&(n.includes("files")||e[n]&&(t.type==="checkbox"?t.checked=e[n]==="on":t.type==="radio"?t.checked=e[n]===t.value:t.value=e[n]))}),L()}let u=1;function M(e){return document.querySelectorAll("[data-repeat='item']")}function R(e){M().length<=1||(e.remove(),u--)}function B(e){u++;const r=document.querySelectorAll("[data-repeat='item']");let t=V.cloneNode(!0);t.querySelectorAll("input").forEach((o,a)=>{o.type==="text"||o.type==="number"?(o.value="",o.name+=u):(o.checked=!1,o.name+=u)}),r[r.length-1].after(t),l()}function W(){H(),x(),p(),l()}W();document.addEventListener("input",function(e){l()},!1);document.addEventListener("click",function(e){e.target.matches("[data-form='next-btn']")&&T(),e.target.matches("[data-form='back-btn']")&&F(),e.target.closest("[data-condition]")&&g(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&R(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&B(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&P()});document.addEventListener("change",function(e){l(),e.target.closest("[data-condition-name]")&&g(e.target.closest("[data-condition-name]"))},!0);
