function x(){let d=document.querySelectorAll('[data-name="value-info"]');const u=document.querySelector('[modal-content="value-info"]'),S=document.querySelector('[data-name="coverage-info"]'),h=document.querySelector('[modal-content="coverage-info"]'),E=document.querySelector('[data-name="modal-close"]'),c=document.querySelector('[data-name="modal"]');d.forEach(n=>n.addEventListener("click",()=>{c.style.display="flex",u.style.display="block",h.style.display="none"})),S.addEventListener("click",()=>{c.style.display="flex",u.style.display="none",h.style.display="block"}),E.addEventListener("click",()=>{c.style.display="none"}),c.addEventListener("click",n=>{n.target===n.currentTarget&&(c.style.display="none")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(c.style.display="none")})}(function(){const d=document.querySelector("[data-form='multi-step'] form"),u=d.dataset.name,S=document.querySelectorAll("[data-form='step']"),h=document.querySelector("[data-form='success']"),E=document.querySelector("[data-form='error']"),c=document.querySelectorAll("[data-form='next-btn']"),n=document.querySelectorAll("[data-form='submit-btn']"),A=document.querySelectorAll("[data-form='step-indicator']"),O=document.querySelectorAll("[data-condition-name]"),T=document.querySelectorAll("[data-condition-el]"),C=document.querySelector("[data-repeat='item']");let m=0;function D(e){return e.offsetParent!==null}function I(){O.forEach(e=>{k(e)})}function q(e){S.forEach((a,t)=>{var o,l;t===m?a.style.display="block":a.style.display="none",t===m?(o=A[t])==null||o.classList.add("active"):(l=A[t])==null||l.classList.remove("active")}),window.scrollTo({top:0}),I(),p()}function b(e=!1){let a=!0;const t=Array.from(S[m].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<t.length;o++){if(!D(t[o]))continue;if(!(e?t[o].checkValidity():t[o].reportValidity()))return a=!1}return a}function p(e){b(!0)?(c.forEach(t=>t.classList.remove("disabled")),n==null||n.forEach(t=>t.classList.remove("disabled"))):(c.forEach(t=>t.classList.add("disabled")),n==null||n.forEach(t=>t.classList.add("disabled")))}function M(){T.forEach(e=>e.style.display="none")}function H(){m>0&&m--,q()}function J(){b()&&(m<S.length&&m++,q())}function R(e){let a=document.querySelectorAll("[data-repeat='item']"),t="";return a.forEach((o,l)=>{var y,i,g;const r=(y=o.querySelector("[name*='Instrument']"))==null?void 0:y.value,s=(i=o.querySelector("[name*='Instrumentenwert']"))==null?void 0:i.value,f=(g=o.querySelector("[name*='Wertart']:checked"))==null?void 0:g.value;r&&s&&f&&(t+=r+`
`+f+`
`+s+`

`)}),e.append("Instruments",t),e}function P(e){let a=new FormData(d);if(!b())return;R(a);const t=document.querySelector("[data-form='submit']");t&&(t.innerHTML="Sendet...",t.disabled=!0);const o={method:"POST",body:a,redirect:"follow"},l=d.action;fetch(l,o).then(async function(r){r.ok&&(d.style.display="none",E.style.display="none",h.style.display="block",localStorage.removeItem(u),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{W()},300))}).catch(function(r){console.error("Error: ",r),h.style.display="none",E.style.display="block"})}function W(){const e=document.querySelectorAll("dotlottie-wc");e.forEach(a=>{console.log("play lottie",a,a.dotLottie),a.style.opacity=1,a.dotLottie.play()}),setTimeout(()=>{e.forEach(a=>{a.dotLottie.play()})},3600)}n.forEach(e=>{e.addEventListener("focus",()=>{console.log("focused"),w()}),e.addEventListener("mouseover",()=>{console.log("mouse over"),w()})});function w(){let e=new FormData(d);if(!window.dataLayer||!e)return;const a=e.get("Email"),t=e.get("Versicherung");let o=0,l=e.get("Gesamtwert");const r=.12;e.entries().forEach(i=>{i[0].includes("Instrumentenwert")&&(o+=parseInt(i[1]))});let s=t==="SINFONIMA"?o:l,f=t==="SINFONIMA"||s>"50000"?.012:.015,y=s*f*r||0;console.log("leadValue",y,f,s),window.dataLayer.push({event:"lead_form_submit","lead-value":Math.round(y*100)/100,email:a})}function k(e){var l;let a;if(e.dataset.conditionName?a=e:a=e.querySelector("[data-condition-name]"),!(a!=null&&a.dataset))return;let t=document.querySelectorAll(`[data-condition-el="${a.dataset.conditionName}"]`);const o=(l=a.querySelector(":checked"))==null?void 0:l.value;t.forEach(r=>{var i;const s=(i=r==null?void 0:r.dataset)==null?void 0:i.condition.split(",").map(g=>g.trim());function f(g,F){return g.some(L=>Array.from(L)[0]==="!"?L.substring(1)!==F:L===F)}const y=f(s,o);a&&(y?r.style.display="block":r.style.display="none")})}function N(e){return e.name.length>0?e.name:e.id.length>0?e.id:null}function _(e){if(!e.target.closest("[data-form='multi-step']"))return;var a=N(e.target);if(!a)return;let t=localStorage.getItem(u);t=t?JSON.parse(t):{},e.target.type==="checkbox"?t[a]=e.target.checked?"on":"off":t[a]=e.target.value,localStorage.setItem(u,JSON.stringify(t))}function G(){let e=localStorage.getItem(u);if(!e)return;e=JSON.parse(e);let a=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");Array.prototype.slice.call(a).forEach(function(t){let o=N(t);o&&(o.includes("files")||e[o]&&(t.type==="checkbox"?t.checked=e[o]==="on":t.type==="radio"?t.checked=e[o]===t.value:t.value=e[o]))}),I()}let v=1;function U(e){return document.querySelectorAll("[data-repeat='item']")}function $(e){U().length<=1||(e.remove(),v--,p())}function j(){v++;const e=document.querySelectorAll("[data-repeat='item']");let a=C.cloneNode(!0);a.querySelectorAll("input").forEach((o,l)=>{o.type==="text"||o.type==="number"?(o.value="",o.name+=v):o.type==="radio"&&(o.checked=!1,o.name+=v,o.id+=v)}),e[e.length-1].after(a),p(),x()}function z(){G(),M(),q(),p(),x()}z(),document.addEventListener("input",function(e){p(),_(e)},!1),document.addEventListener("keypress",function(e){e.key==="Enter"&&V(e)}),document.addEventListener("click",V);function V(e){e.target.matches("[data-form='next-btn']")&&J(),e.target.matches("[data-form='back-btn']")&&H(),e.target.closest("[data-condition]")&&k(e.target.closest("[data-condition]")),e.target.closest("[data-repeat='delete-item']")&&$(e.target.closest("[data-repeat='item']")),e.target.closest("[data-repeat='add-item']")&&j(e.target.closest("[data-repeat='add-item']")),e.target.matches("[data-form='submit-btn']")&&P()}document.addEventListener("change",function(e){p(),e.target.closest("[data-condition-name]")&&k(e.target.closest("[data-condition-name]"))},!0)})();
