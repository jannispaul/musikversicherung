(()=>{const c=document.querySelector("[data-form='multi-step'] form"),f=document.querySelectorAll("[data-form='step']");document.querySelectorAll("[data-form='back-btn']");const s=document.querySelectorAll("[data-form='next-btn']"),i=document.querySelectorAll("[data-form='submit-btn']"),m=c==null?void 0:c.dataset.name,g=document.querySelector("[data-form='success']")||document.querySelector(".w-form-done"),O=document.querySelector("[data-form='error']")||document.querySelector(".w-form-fail"),b=document.querySelectorAll("[data-form='step-indicator']"),E=document.querySelector("[data-form='current-step']"),k=document.querySelector("[data-form='total-steps']"),V=document.querySelectorAll("[data-condition-name]"),C=document.querySelectorAll("[data-condition]");let r=0,v=Object.fromEntries(new URLSearchParams(location.search));function F(t){return t.offsetParent!==null}function N(){k&&(k.innerText=f.length)}function x(){E&&(E.innerText=r+1)}function h(){f.forEach((t,e)=>{var a,o;e===r?t.style.display="block":t.style.display="none",e===r?(a=b[e])==null||a.classList.add("active"):(o=b[e])==null||o.classList.remove("active")}),x(),l(),p(),A()}function q(t=!1){let e=!0;const a=Array.from(f[r].querySelectorAll("input[required], textarea[required], select[required]"));for(let o=0;o<a.length;o++){if(!F(a[o]))continue;if(!(t?a[o].checkValidity():a[o].reportValidity()))return e=!1}return e}function p(){q(!0)?(s==null||s.forEach(e=>e.classList.remove("disabled")),i==null||i.forEach(e=>e.classList.remove("disabled"))):(s==null||s.forEach(e=>e.classList.add("disabled")),i==null||i.forEach(e=>e.classList.add("disabled")))}function P(){C.forEach(t=>t.style.display="none")}function A(){window.scrollTo({top:0,behavior:"smooth"})}function D(){r>0&&r--,h()}function R(){q()&&(r<f.length&&r++,h())}function H(t){if(t.preventDefault(),!q())return;const e=document.querySelector("[data-form='submit']");e&&(e.innerHTML=e.dataset.wait&&"Please wait...",e.disabled=!0);const o={method:"POST",body:new FormData(c),redirect:"follow"},y=c.action;fetch(y,o).then(function(d){d.ok&&(localStorage.removeItem(m),c.style.display="none",g&&(g.style.display="block"),A())}).catch(function(d){console.error("Error: ",d),g.style.display="none",O.style.display="block"})}function l(t){var d;let e;if(t!=null&&t.dataset.conditionName?e=t:e=t==null?void 0:t.querySelector("[data-condition-name]"),!(e!=null&&e.dataset))return;let a=document.querySelectorAll(`[data-condition-el="${e.dataset.conditionName}"]`);const o=(d=e.querySelector(":checked"))==null?void 0:d.value;function y(n,S){return n.some(u=>Array.from(u)[0]==="!"?u.substring(1)!==S:u===S)}a.forEach(n=>{var T;const S=(T=n==null?void 0:n.dataset)==null?void 0:T.condition.split(",").map(K=>K.trim()),u=y(S,o);e&&(u?n.style.display="block":n.style.display="none")})}function L(t){return t.name.length>0?t.name:t.id.length>0?t.id:null}function J(t){if(t.target.closest("[data-auto-save='exclude']")||!t.target.closest("[data-auto-save]"))return;var e=L(t.target);if(!e)return;let a=localStorage.getItem(m);a=a?JSON.parse(a):{},t.target.type==="checkbox"?a[e]=t.target.checked?"on":"off":a[e]=t.target.value,localStorage.setItem(m,JSON.stringify(a))}function I(t,e){Array.prototype.slice.call(t).forEach(a=>{let o=L(a);o&&(o.includes("files")||e[o]&&(a.type==="checkbox"?a.checked=e[o]==="on":a.type==="radio"?a.checked=e[o]===a.value:a.value=e[o]))})}function U(){let t=localStorage.getItem(m);if(!t)return;t=JSON.parse(t);let e=document.querySelectorAll("[data-auto-save] input, [data-auto-save] textarea, [data-auto-save] select");I(e,t)}function M(){if(!v)return;const t=document.querySelectorAll("input, textarea, select");I(t,v)}function $(){P(),N(),U(),M(),l(),h(),p()}$(),document.addEventListener("keypress",function(t){t.key==="Enter"&&w(t)}),document.addEventListener("click",w);function w(t){t.target.matches("[data-form='next-btn']")&&R(),t.target.matches("[data-form='back-btn']")&&D(),t.target.closest("[data-condition]")&&l(t.target.closest("[data-condition]")),t.target.closest("[data-repeat='delete-item']")&&deleteRepeatable(t.target.closest("[data-repeat='item']")),t.target.closest("[data-repeat='add-item']")&&addRepeatable(t.target.closest("[data-repeat='add-item']")),t.target.matches("[data-form='submit-btn']")&&H(t)}document.addEventListener("input",z,!1);function z(t){p(),J(t)}document.addEventListener("change",G,!0);function G(t){p(),t.target.closest("[data-condition-name]")&&l(t.target.closest("[data-condition-name]"))}})();
